smartpca is a method that conduct PCA for the SNPs in the genome-wide. 
http://evomics.org/learning/population-and-speciation-genomics/2018-population-and-speciation-genomics/vcf-activity/ 
This website explains clearly how to do the SNP calling and how to do the PCA. 

This website might also be useful: https://evomics.org/learning/population-and-speciation-genomics/2016-population-and-speciation-genomics/pca-exercise/

Step1: generate the vcf file like usual. 
Step2: change the format to the plink file using vcftools. (more explaination about the plink file is in the folder) 
Step3: generate the file smartpca requires.
  1. ped file. You can directly use the .ped file generated by the plink through vcftools 
  2. pedsnp file. This is the file that ended with .map. The only thing you need to do is to change the name from ".map" to ".pedsnp"
  3. pedind file. You can generate this file through the following code: 
      cat filename.ped | cut -f1-6 > filename.pedind 
  4. generate the .par file. 
      genotypename:    spanish_weedy_remove_outgroup.ped
      snpname:         spanish_weedy_remove_outgroup.pedsnp
      indivname:       spanish_weedy_remove_outgroup.pedind
      evecoutname:     spanish_weedy_remove_outgroup_pca.evec
      evaloutname:     spanish_weedy_remove_outgroup_pca.eval
      numoutevec:      2 (how many PC you want to have)
      numoutlieriter:  0 (you don't want to remove the outliers) 
Step4: move all the files in the same folder and submit the job. 
#BSUB -n 1
#BSUB -R "span[hosts=1] rusage[mem=2048]"
#BSUB -q short
#BSUB -W 2:00
#BSUB -o "/project/uma_ana_caicedo/xiang_li/spanish_weedy_rice/output/%J.out"
#BSUB -e "/project/uma_ana_caicedo/xiang_li/spanish_weedy_rice/output/%J.err"

module load eigensoft/7.2.1/bin
smartpca -p spanish_weedy_remove_outgroup.par > spanish_weedy_remove_outgroup.log

For plotting PCA, I just use the ggplot to draw the points. 
